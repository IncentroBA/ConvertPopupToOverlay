import { useState, useEffect, createElement } from 'react';

function waitFor(elementClass, callback, parent) {
  const context = parent || document;
  if (context.querySelector(elementClass)) {
    callback();
  } else {
    const observer = new MutationObserver(() => {
      if (context.querySelector(elementClass)) {
        observer.disconnect();
        callback();
      }
    });

    // Start observing
    observer.observe(context, {
      childList: true,
      //This is a must have for the observer with subtree
      subtree: true //Set to true if changes must also be observed in descendants.
    });
  }
}

function ConvertPopupToOverlay({
  closeAction,
  closeButtonClass,
  overlayStyle,
  position,
  shouldClosePage,
  showHeader,
  size,
  underlayColor
}) {
  const [canRender, setCanRender] = useState(false);
  const [modal, setModal] = useState(null);
  const page = document.querySelector(".mx-page");
  useEffect(() => {
    if (document.querySelector(".convert-popup-to-overlay")) {
      setModal(document.querySelector(".convert-popup-to-overlay").closest(".modal-dialog"));
      setCanRender(true);
    }
    return () => {};
  });
  function setUnderlayColor() {
    underlayColor && document.documentElement.style.setProperty(`--underlay-color`, underlayColor);
  }
  function removeUnderlay() {
    const underlay = document.querySelector(".popup-underlay.old");
    underlay && underlay.classList.remove("visible");
  }
  function AnimateCloseModal() {
    const modal = document.querySelector(".popup-overlay");
    overlayStyle === "push" ? page.style.transform = `translate(0px)` : null;
    if (overlayStyle === "push") {
      setTimeout(() => modal && modal.classList.remove("visible"), 400);
    } else {
      modal && modal.classList.remove("visible");
    }
    removeUnderlay();
  }
  function closeModal() {
    AnimateCloseModal();
    if (closeAction && closeAction.canExecute) {
      closeAction.execute();
    } else if (!closeAction && shouldClosePage === true) {
      const closeBtn = document.querySelector(".popup-overlay .close");
      setTimeout(() => closeBtn.click(), 300);
    }
  }
  function generateUnderlay() {
    modal.insertAdjacentHTML("beforeend", '<div class="popup-underlay"></div>');
    const underlay = document.querySelector(".popup-underlay:not(.old)");
    underlay?.addEventListener("click", closeModal);
    underlay?.classList.add("old");
    return underlay;
  }

  // overlay for the default close button
  function generateCloseBtn() {
    if (showHeader === true && shouldClosePage === true) {
      const modalContent = modal.querySelector(".modal-content");
      modalContent.insertAdjacentHTML("afterbegin", `<div class="popup-overlay__closebutton"></div>`);
      document.querySelector(".popup-overlay__closebutton")?.addEventListener("click", closeModal);
    }
  }
  function linkCloseButtons() {
    document.querySelectorAll(`.${closeButtonClass}`).forEach(closeBtn => {
      if (shouldClosePage === true) {
        closeBtn?.addEventListener("click", closeModal);
      } else {
        closeBtn?.addEventListener("click", AnimateCloseModal);
      }
    });
  }

  // Wait with transitions in case of progressbar
  function foundProgress() {
    return true;
  }
  if (canRender) {
    setTimeout(() => {
      modal.classList.add("popup-overlay", `popup-overlay--${position}`);
      if (overlayStyle === "push") {
        page.classList.add("mx-page--push");
      }
      setTimeout(() => {
        // Set size as width
        if (position === "left" || position === "right") {
          modal.style.width = `${size}px`;
        }
        // Set size as height
        if (position === "top" || position === "bottom") {
          modal.style.height = `${size}px`;
        }
      }, 100);
      showHeader === false && modal.classList.add("popup-overlay--remove-header");
      setUnderlayColor();
      const underlay = generateUnderlay();
      const progress = waitFor(".mx-progress", foundProgress, document);
      if (progress) {
        underlay.classList.remove("visible");
        modal.classList.remove("transition");
        modal.classList.remove("visible");
      } else {
        setTimeout(() => {
          generateCloseBtn();
          setTimeout(() => linkCloseButtons(), 300);
          if (overlayStyle === "over") {
            underlay && underlay.classList.add("visible");
          } else {
            underlay && underlay.classList.add("hidden");
          }
          if (overlayStyle !== "push") {
            setTimeout(() => modal && modal.classList.add("transition"), 100);
          }
          setTimeout(() => modal && modal.classList.add("visible"), 100);
          if (overlayStyle === "push") {
            if (position === "left") {
              page.style.transform = `translateX(${size}px)`;
            }
            if (position === "right") {
              page.style.transform = `translateX(-${size}px)`;
            }
            if (position === "top") {
              page.style.transform = `translateY(${size}px)`;
            }
            if (position === "bottom") {
              page.style.transform = `translateY(-${size}px)`;
            }
          }
        }, 200);
      }
    }, 2);
    return null;
  } else {
    return createElement("div", {
      className: "convert-popup-to-overlay"
    });
  }
}

export { ConvertPopupToOverlay as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udmVydFBvcHVwVG9PdmVybGF5Lm1qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2hlbHBlcnMvd2FpdEZvci5qcyIsIi4uLy4uLy4uLy4uLy4uL3NyYy9Db252ZXJ0UG9wdXBUb092ZXJsYXkuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKGVsZW1lbnRDbGFzcywgY2FsbGJhY2ssIHBhcmVudCkge1xuICBjb25zdCBjb250ZXh0ID0gcGFyZW50IHx8IGRvY3VtZW50O1xuXG4gIGlmIChjb250ZXh0LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENsYXNzKSkge1xuICAgIGNhbGxiYWNrKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICBpZiAoY29udGV4dC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRDbGFzcykpIHtcbiAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICAvLyBTdGFydCBvYnNlcnZpbmdcbiAgICBvYnNlcnZlci5vYnNlcnZlKGNvbnRleHQsIHtcbiAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgLy9UaGlzIGlzIGEgbXVzdCBoYXZlIGZvciB0aGUgb2JzZXJ2ZXIgd2l0aCBzdWJ0cmVlXG4gICAgICBzdWJ0cmVlOiB0cnVlLCAvL1NldCB0byB0cnVlIGlmIGNoYW5nZXMgbXVzdCBhbHNvIGJlIG9ic2VydmVkIGluIGRlc2NlbmRhbnRzLlxuICAgIH0pO1xuICB9XG59OyIsImltcG9ydCBcIi4vdWkvQ29udmVydFBvcHVwVG9PdmVybGF5LmNzc1wiO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgd2FpdEZvciB9IGZyb20gXCIuL2hlbHBlcnMvd2FpdEZvclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDb252ZXJ0UG9wdXBUb092ZXJsYXkoe1xuICAgIGNsb3NlQWN0aW9uLFxuICAgIGNsb3NlQnV0dG9uQ2xhc3MsXG4gICAgb3ZlcmxheVN0eWxlLFxuICAgIHBvc2l0aW9uLFxuICAgIHNob3VsZENsb3NlUGFnZSxcbiAgICBzaG93SGVhZGVyLFxuICAgIHNpemUsXG4gICAgdW5kZXJsYXlDb2xvclxufSkge1xuICAgIGNvbnN0IFtjYW5SZW5kZXIsIHNldENhblJlbmRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gICAgY29uc3QgW21vZGFsLCBzZXRNb2RhbF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5teC1wYWdlXCIpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udmVydC1wb3B1cC10by1vdmVybGF5XCIpKSB7XG4gICAgICAgICAgICBzZXRNb2RhbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnZlcnQtcG9wdXAtdG8tb3ZlcmxheVwiKS5jbG9zZXN0KFwiLm1vZGFsLWRpYWxvZ1wiKSk7XG4gICAgICAgICAgICBzZXRDYW5SZW5kZXIodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBzZXRVbmRlcmxheUNvbG9yKCkge1xuICAgICAgICB1bmRlcmxheUNvbG9yICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShgLS11bmRlcmxheS1jb2xvcmAsIHVuZGVybGF5Q29sb3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZVVuZGVybGF5KCkge1xuICAgICAgICBjb25zdCB1bmRlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtdW5kZXJsYXkub2xkXCIpO1xuICAgICAgICB1bmRlcmxheSAmJiB1bmRlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBBbmltYXRlQ2xvc2VNb2RhbCgpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLW92ZXJsYXlcIik7XG4gICAgICAgIG92ZXJsYXlTdHlsZSA9PT0gXCJwdXNoXCIgPyAocGFnZS5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlKDBweClgKSA6IG51bGw7XG4gICAgICAgIGlmIChvdmVybGF5U3R5bGUgPT09IFwicHVzaFwiKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG1vZGFsICYmIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpLCA0MDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9kYWwgJiYgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInZpc2libGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlVW5kZXJsYXkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICAgICAgICBBbmltYXRlQ2xvc2VNb2RhbCgpO1xuXG4gICAgICAgIGlmIChjbG9zZUFjdGlvbiAmJiBjbG9zZUFjdGlvbi5jYW5FeGVjdXRlKSB7XG4gICAgICAgICAgICBjbG9zZUFjdGlvbi5leGVjdXRlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWNsb3NlQWN0aW9uICYmIHNob3VsZENsb3NlUGFnZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLW92ZXJsYXkgLmNsb3NlXCIpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBjbG9zZUJ0bi5jbGljaygpLCAzMDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVVbmRlcmxheSgpIHtcbiAgICAgICAgbW9kYWwuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsICc8ZGl2IGNsYXNzPVwicG9wdXAtdW5kZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgY29uc3QgdW5kZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLXVuZGVybGF5Om5vdCgub2xkKVwiKTtcbiAgICAgICAgdW5kZXJsYXk/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcbiAgICAgICAgdW5kZXJsYXk/LmNsYXNzTGlzdC5hZGQoXCJvbGRcIik7XG4gICAgICAgIHJldHVybiB1bmRlcmxheTtcbiAgICB9XG5cbiAgICAvLyBvdmVybGF5IGZvciB0aGUgZGVmYXVsdCBjbG9zZSBidXR0b25cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNsb3NlQnRuKCkge1xuICAgICAgICBpZiAoc2hvd0hlYWRlciA9PT0gdHJ1ZSAmJiBzaG91bGRDbG9zZVBhZ2UgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsQ29udGVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY29udGVudFwiKTtcbiAgICAgICAgICAgIG1vZGFsQ29udGVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsIGA8ZGl2IGNsYXNzPVwicG9wdXAtb3ZlcmxheV9fY2xvc2VidXR0b25cIj48L2Rpdj5gKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtb3ZlcmxheV9fY2xvc2VidXR0b25cIik/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpbmtDbG9zZUJ1dHRvbnMoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2Nsb3NlQnV0dG9uQ2xhc3N9YCkuZm9yRWFjaChjbG9zZUJ0biA9PiB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkQ2xvc2VQYWdlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VCdG4/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2xvc2VCdG4/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBBbmltYXRlQ2xvc2VNb2RhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFdhaXQgd2l0aCB0cmFuc2l0aW9ucyBpbiBjYXNlIG9mIHByb2dyZXNzYmFyXG4gICAgZnVuY3Rpb24gZm91bmRQcm9ncmVzcygpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGNhblJlbmRlcikge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJwb3B1cC1vdmVybGF5XCIsIGBwb3B1cC1vdmVybGF5LS0ke3Bvc2l0aW9ufWApO1xuXG4gICAgICAgICAgICBpZiAob3ZlcmxheVN0eWxlID09PSBcInB1c2hcIikge1xuICAgICAgICAgICAgICAgIHBhZ2UuY2xhc3NMaXN0LmFkZChcIm14LXBhZ2UtLXB1c2hcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFNldCBzaXplIGFzIHdpZHRoXG4gICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSBcImxlZnRcIiB8fCBwb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLnN0eWxlLndpZHRoID0gYCR7c2l6ZX1weGA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNldCBzaXplIGFzIGhlaWdodFxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gXCJ0b3BcIiB8fCBwb3NpdGlvbiA9PT0gXCJib3R0b21cIikge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5zdHlsZS5oZWlnaHQgPSBgJHtzaXplfXB4YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgc2hvd0hlYWRlciA9PT0gZmFsc2UgJiYgbW9kYWwuY2xhc3NMaXN0LmFkZChcInBvcHVwLW92ZXJsYXktLXJlbW92ZS1oZWFkZXJcIik7XG4gICAgICAgICAgICBzZXRVbmRlcmxheUNvbG9yKCk7XG4gICAgICAgICAgICBjb25zdCB1bmRlcmxheSA9IGdlbmVyYXRlVW5kZXJsYXkoKTtcbiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gd2FpdEZvcihcIi5teC1wcm9ncmVzc1wiLCBmb3VuZFByb2dyZXNzLCBkb2N1bWVudCk7XG5cbiAgICAgICAgICAgIGlmIChwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHVuZGVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJ0cmFuc2l0aW9uXCIpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2aXNpYmxlXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVDbG9zZUJ0bigpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGxpbmtDbG9zZUJ1dHRvbnMoKSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXlTdHlsZSA9PT0gXCJvdmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybGF5ICYmIHVuZGVybGF5LmNsYXNzTGlzdC5hZGQoXCJ2aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZXJsYXkgJiYgdW5kZXJsYXkuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdmVybGF5U3R5bGUgIT09IFwicHVzaFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG1vZGFsICYmIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJ0cmFuc2l0aW9uXCIpLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gbW9kYWwgJiYgbW9kYWwuY2xhc3NMaXN0LmFkZChcInZpc2libGVcIiksIDEwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG92ZXJsYXlTdHlsZSA9PT0gXCJwdXNoXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gXCJsZWZ0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7c2l6ZX1weClgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBvc2l0aW9uID09PSBcInJpZ2h0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3NpemV9cHgpYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gXCJ0b3BcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2Uuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtzaXplfXB4KWA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IFwiYm90dG9tXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKC0ke3NpemV9cHgpYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDIpO1xuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImNvbnZlcnQtcG9wdXAtdG8tb3ZlcmxheVwiPjwvZGl2PjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsid2FpdEZvciIsImVsZW1lbnRDbGFzcyIsImNhbGxiYWNrIiwicGFyZW50IiwiY29udGV4dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsImRpc2Nvbm5lY3QiLCJvYnNlcnZlIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsIkNvbnZlcnRQb3B1cFRvT3ZlcmxheSIsImNsb3NlQWN0aW9uIiwiY2xvc2VCdXR0b25DbGFzcyIsIm92ZXJsYXlTdHlsZSIsInBvc2l0aW9uIiwic2hvdWxkQ2xvc2VQYWdlIiwic2hvd0hlYWRlciIsInNpemUiLCJ1bmRlcmxheUNvbG9yIiwiY2FuUmVuZGVyIiwic2V0Q2FuUmVuZGVyIiwidXNlU3RhdGUiLCJtb2RhbCIsInNldE1vZGFsIiwicGFnZSIsInVzZUVmZmVjdCIsImNsb3Nlc3QiLCJzZXRVbmRlcmxheUNvbG9yIiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInJlbW92ZVVuZGVybGF5IiwidW5kZXJsYXkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJBbmltYXRlQ2xvc2VNb2RhbCIsInRyYW5zZm9ybSIsInNldFRpbWVvdXQiLCJjbG9zZU1vZGFsIiwiY2FuRXhlY3V0ZSIsImV4ZWN1dGUiLCJjbG9zZUJ0biIsImNsaWNrIiwiZ2VuZXJhdGVVbmRlcmxheSIsImluc2VydEFkamFjZW50SFRNTCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhZGQiLCJnZW5lcmF0ZUNsb3NlQnRuIiwibW9kYWxDb250ZW50IiwibGlua0Nsb3NlQnV0dG9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZm91bmRQcm9ncmVzcyIsIndpZHRoIiwiaGVpZ2h0IiwicHJvZ3Jlc3MiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIl0sIm1hcHBpbmdzIjoiOztBQUFPLFNBQVNBLE9BQU9BLENBQUNDLFlBQVksRUFBRUMsUUFBUSxFQUFFQyxNQUFNLEVBQUU7QUFDdEQsRUFBQSxNQUFNQyxPQUFPLEdBQUdELE1BQU0sSUFBSUUsUUFBUSxDQUFBO0FBRWxDLEVBQUEsSUFBSUQsT0FBTyxDQUFDRSxhQUFhLENBQUNMLFlBQVksQ0FBQyxFQUFFO0FBQ3ZDQyxJQUFBQSxRQUFRLEVBQUUsQ0FBQTtBQUNaLEdBQUMsTUFBTTtBQUNMLElBQUEsTUFBTUssUUFBUSxHQUFHLElBQUlDLGdCQUFnQixDQUFDLE1BQU07QUFDMUMsTUFBQSxJQUFJSixPQUFPLENBQUNFLGFBQWEsQ0FBQ0wsWUFBWSxDQUFDLEVBQUU7UUFDdkNNLFFBQVEsQ0FBQ0UsVUFBVSxFQUFFLENBQUE7QUFDckJQLFFBQUFBLFFBQVEsRUFBRSxDQUFBO0FBQ1osT0FBQTtBQUNGLEtBQUMsQ0FBQyxDQUFBOztBQUVGO0FBQ0FLLElBQUFBLFFBQVEsQ0FBQ0csT0FBTyxDQUFDTixPQUFPLEVBQUU7QUFDeEJPLE1BQUFBLFNBQVMsRUFBRSxJQUFJO0FBQUU7TUFDakJDLE9BQU8sRUFBRSxJQUFJO0FBQ2YsS0FBQyxDQUFDLENBQUE7QUFDSixHQUFBO0FBQ0Y7O0FDZmUsU0FBU0MscUJBQXFCQSxDQUFDO0VBQzFDQyxXQUFXO0VBQ1hDLGdCQUFnQjtFQUNoQkMsWUFB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
